<% provide(:title, item_display_name(@item)) %>

<% if policy(@item).edit? or policy(@item).destroy? %>
  <div class="item-admin" style="margin-bottom: 20px;">
    <% if policy(@item).edit? %>
      <%= link_to(
              fa_icon("pencil", :text => t("edit")),
              edit_catalog_admin_item_path(catalog, I18n.locale, @item_type, @item),
              :class => "btn btn-default btn-xs",
              :target => '_blank') %>
    <% end %>
    <% if policy(@item).destroy? %>
      <%= link_to(
              fa_icon("trash-o", :text => t("delete")),
              catalog_admin_item_path(catalog, locale, @item_type, @item),
              :class => "btn btn-default btn-xs",
              :method => :delete,
              :data => {
                  :confirm => t('.delete_confirm', item: default_display_name(@item))
              }) %>
    <% end %>
  </div>
<% end %>

<%= render_item_list_nav(item_list, @item) if item_list %>

<table class="table item-table">
  <tbody>
    <% @item.applicable_fields.each do |field| %>
      <% if field_check_display(@item, field) %>
        <tr>
          <th><%= field.label %></th>
            <td class="<%= field.type %>"><%= field_value(@item, field) %></td>
        </tr>
      <% end %>
    <% end %>
  </tbody>
</table>

<% fields_and_item_references(@item) do |field, browse| %>
  <h3><%= field.item_type.name_plural %></h3>
  <%= render_item_list(browse) %>
  <% if browse.more? %>
    <%= link_to(items_path(
          :item_type_slug => browse.item_type,
          browse.field.slug => browse.value
        )) do %>
      <%# TODO: i18n %>
      View more
      (<%= pluralize(browse.total_count, "item") %>)
    <% end %>
  <% end %>
<% end %>
