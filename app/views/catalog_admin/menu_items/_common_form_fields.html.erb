<%= f.text_field(:slug, :help => slug_help_text, :autofocus => true) %>

<%= locale_language_select(
  f,
  :locale,
  :locales => catalog.valid_locales,
  :label => t('.locale')) %>

<%= f.text_field(:title) %>
<%= f.number_field(:rank, help: t('.rank_help')) %>

<%= f.select(
  :parent_id,
  options_from_collection_for_select(
    @catalog.menu_items, "id", "title", @menu_item.parent_id
  ),
  {
    include_blank: true,
    help: t('.parent_help')
  }
) %>

<div class="well help-block">
  <p><%= t('.help_block_intro') %></p>
  <ul>
    <li><%= t('.help_block_item_1').html_safe %></li>
    <li><%= t('.help_block_item_2').html_safe %></li>
    <li><%= t('.help_block_item_3').html_safe %></li>
    <li><%= t('.help_block_item_4').html_safe %></li>
  </ul>
</div>

<%= f.select(
  :item_type_id,
  options_from_collection_for_select(
    @catalog.item_types, "id", "name", @menu_item.item_type_id
  ),
  { include_blank: true }
) %>

<%= f.select(
  :page_id,
  options_for_select(
    @catalog.pages.order('slug').collect { |p| [ "#{p.slug} | #{p.title}", p.id ] },
    @menu_item.page_id
  ),
  { include_blank: true }
) %>

<%= f.text_field(:url) %>


<script>
function updateFieldDisplay(){
  $('#menu_item_item_type_id').attr('disabled', null);
  $('#menu_item_page_id').attr('disabled', null);
  $('#menu_item_url').attr('disabled', null);

  if ($('#menu_item_item_type_id').val()){
    $('#menu_item_page_id').attr('disabled', 'disabled');
    $('#menu_item_url').attr('disabled', 'disabled');
  }

  if ($('#menu_item_page_id').val()){
    $('#menu_item_item_type_id').attr('disabled', 'disabled');
    $('#menu_item_url').attr('disabled', 'disabled');
  }

  if ($('#menu_item_url').val()){
    $('#menu_item_item_type_id').attr('disabled', 'disabled');
    $('#menu_item_page_id').attr('disabled', 'disabled');
  }
}

$('#menu_item_item_type_id').on('change', updateFieldDisplay);
$('#menu_item_page_id').on('change', updateFieldDisplay);
$('#menu_item_url').on('change', updateFieldDisplay);
updateFieldDisplay();
</script>
